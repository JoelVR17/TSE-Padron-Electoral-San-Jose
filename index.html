<!-- HTML5 -->
<!DOCTYPE html>

<!-- HTML -->
<html lang="en">

<!-- HEAD -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/850c2e9361.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/normalize.css">
    <title>TSE - Index</title>
</head> <!--fin.Head-->

<!-- BODY -->
<body>

    <!-- HEADER -->
    <header class="header">
        <nav class="navbar navbar-light" style="padding-left: 1rem; padding-right: 1rem;">
            <div class="container-fluid">
                <div class="contenedor__header">
                    <a class="navbar-brand" href="index.html" style="margin-left: 25px;" >
                        <img src="img/log.png" alt="" width="200" height="70" class="d-inline-block align-text-top">
                    </a>
                    <a class="ancla" href="consulta.html">
                        <p class="ancla">Consultar</p>
                    </a>
                    <a class="ancla" href="reporte.html">
                        <p class="ancla">Reportes</p>
                    </a>
                    <a class="ancla" href="distelec.html">
                        <p class="ancla">Distelec</p>
                    </a>
                    <a class="ancla" href="login.html">
                        <i class="fa-solid fa-right-from-bracket"></i>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- PADRON ELECTORAL -->
    <div class="container">
        
        <div class="contenedor__titulo">
            <h1 class="titulo">Padron Electoral</h1>
        </div>

        <form action="">
            <button id="cargarPadron"  type="button" name="padron" class="btn__cargar" >Cargar Datos</button>
            
        </form>

        <br>

        <!-- TABLA PARA MOSTRAR EL PADRON -->
        <table id="tablaPadron" class="table table-striped" style="width:100%">

            <thead>
                <tr>
                    <th>Cédula</th>
                    <th>CODELEC</th>
                    <th>Fecha Caducidad</th>
                    <th>Nombre</th>
                    <th>Primer Apellido</th>
                    <th>Segundo Apellido</th>
                </tr>
            </thead>

            <tbody>
            </tbody>

            <tfoot>
                <tr>
                    <th>Cédula</th>
                    <th>CODELEC</th>
                    <th>Fecha Caducidad</th>
                    <th>Nombre</th>
                    <th>Primer Apellido</th>
                    <th>Segundo Apellido</th>
                </tr>
            </tfoot>

        </table>

        <br/>

        <form id="formPadron" action="">
            <input id="subirPadron" id="fileInput" type="file" accept=".txt" name="padron" class="btn__cargar" ></input>
            <button name="inputPadron" type="submit" class="btn__cargar" >Subir archivo de texto</button>
        </form>
    </div> <!--fin.padron-->

    <!-- FOTO -->
    <div class="contenedor__foto">
        <img class="img-principal" src="img/foto.webp" alt="">
    </div>

    <!-- CODELEC -->
    <div class="container">
        
        <div class="contenedor__titulo">
            <h1 class="titulo">CODELEC</h1>
        </div>

        <form action="">
            <button id="cargarDistelec" name="cargarDistelec" type="button" class="btn__cargar" >Cargar Datos</button>

        </form>

        <br>

        <!-- TABLA PARA MOSTRAR EL CODELEC -->
        <table id="tablaCodelec" class="table table-striped" style="width:100%">

            <thead>
                <tr>
                    <th>CODELEC</th>
                    <th>Provincia</th>
                    <th>Canton</th>
                    <th>Distrito</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
            <tfoot>
                <tr>
                    <th>CODELEC</th>
                    <th>Provincia</th>
                    <th>Canton</th>
                    <th>Distrito</th>
                </tr>
            </tfoot>

        </table>

        <br/>

        <form id="formDistelec" action="">
            <input id="subirDistelec" id="fileInput" type="file" accept=".txt" name="padron" class="btn__cargar" ></input>
            <button name="inputDistelec" type="submit" class="btn__cargar" >Subir archivo de texto</button>
        </form>
    </div> <!--fin.codelec-->

    <!-- FOOTER -->
    <footer class="footer">
        <p class="copyright">Todos los derechos Reservados 2022 &copy;</p>
    </footer>

</body> <!--fin.body-->

<!-- JAVASCRIPT -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
<script src="js/script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script> 
    $(document).ready(function () {
        $.ajax({
        'url': "http://localhost:3000/distelec",
        'method': "GET",
        'cache': 'false',
        'headers' : {'Cache-Control':'no-store'}
        
    }).done( function(data) {

        $("#tablaCodelec").dataTable( {
            "aaData": data,
            columns: [
        { data: 0 },
        { data: 1 },
        { data: 2 },
        { data: 3 }
    ]
        })
    }),

        $.ajax({
        'url': "http://localhost:3000/padron",
        'method': "GET",
        'cache': 'false',
        'headers' : {'Cache-Control':'no-store'}

        
    }).done( function(data) {
        console.log(data);
        $("#tablaPadron").dataTable( {
            "aaData": data,
            columns: [
        { data: 0 },
        { data: 1 },
        { data: 2 },
        { data: 3 },
        { data: 4 },
        { data: 5 }
    ]
        })
    });

    });

    $("#cargarPadron").click(()=>{
        $.ajax({
        'url': "http://localhost:3000/padron/insert",
        'method': "GET",
    }).done(console.log("Done"));
    }),
    $("#cargarDistelec").click(()=>{
        $.ajax({
        'url': "http://localhost:3000/distelec/insert",
        'method': "GET",
    }).done(console.log("Done Distelec"));
    });

</script>

<script>

    document.getElementById('formPadron').addEventListener("submit", e => {
        e.preventDefault(); 

        const submitPadron = document.getElementById('subirPadron').files[0];

        const formDataPadron = new FormData();

        formDataPadron.append('file', submitPadron, 'SJ.txt')


        //api de padron guarda archivo
        fetch('http://localhost:3000/padron/upload-padron', {
            method: "POST",
            body: formDataPadron, 
        })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.log(err));

       
    });

    
 
</script>



<script>

    document.getElementById('formDistelec').addEventListener("submit", e => {
        e.preventDefault(); 

        const submitDistelec = document.getElementById('subirDistelec').files[0];

        const formDataDistelec = new FormData();

        formDataDistelec.append('file', submitDistelec, 'distelec.txt')

        fetch('http://localhost:3000/distelec/upload-distelec', {
            method: "POST",
            body: formDataDistelec, 
        })
        .then(res => res.json())
        .then(data => console.log(data))
        .catch(err => console.log(err));
       
    });

    
 
</script>


</html> <!--fin.html-->
